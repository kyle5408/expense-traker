{{!-- Dropdowns --}}
<div class="container">
  <div name="filter-form" class="col-auto mr-auto">
    <form action="/filter" method="POST">
      <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" style="width: 40%"
        onchange="submit()" name="month">
        <option value='Select'>選擇月份</option>
        <option {{#if (isEqual monthFilter '1' )}}selected{{/if}} value='1'> Jan.
        </option>
        <option {{#if (isEqual monthFilter '2' )}}selected{{/if}} value='2'> Feb.
        </option>
        <option {{#if (isEqual monthFilter '3' )}}selected{{/if}} value='3'> Mar.
        </option>
        <option {{#if (isEqual monthFilter '4' )}}selected{{/if}} value='4'> Apr.
        </option>
        <option {{#if (isEqual monthFilter '5' )}}selected{{/if}} value='5'> May
        </option>
        <option {{#if (isEqual monthFilter '6' )}}selected{{/if}} value='6'> Jun.
        </option>
        <option {{#if (isEqual monthFilter '7' )}}selected{{/if}} value='7'> Jul.
        </option>
        <option {{#if (isEqual monthFilter '8' )}}selected{{/if}} value='8'> Aug.
        </option>
        <option {{#if (isEqual monthFilter '9' )}}selected{{/if}} value='9'> Sep.
        </option>
        <option {{#if (isEqual monthFilter '10' )}}selected{{/if}} value='10'> Oct.
        </option>
        <option {{#if (isEqual monthFilter '11' )}}selected{{/if}} value='11'> Nov.
        </option>
        <option {{#if (isEqual monthFilter '12' )}}selected{{/if}} value='12'> Dec.
        </option>
      </select>


      <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" style="width: 40%"
        onchange="submit()" name="category">
        {{!-- 為何自定義handlebars helper無法比較兩個變數? --}}
        <option value='Select'>選擇類別</option>
        <option {{#if (isEqual categoryFilter '家居物業' )}}selected{{/if}}> 家居物業
        </option>
        <option {{#if (isEqual categoryFilter '交通出行' )}}selected{{/if}}> 交通出行
        </option>
        <option {{#if (isEqual categoryFilter '休閒娛樂' )}}selected{{/if}}> 休閒娛樂
        </option>
        <option {{#if (isEqual categoryFilter '餐飲食品' )}}selected{{/if}}> 餐飲食品
        </option>
        <option {{#if (isEqual categoryFilter '其他' )}}selected{{/if}}> 其他
        </option>
      </select>
    </form>
  </div>

  <div class="row mt-3">
    <div class="col-md-4 ml-4">
      <div class="" style=" font-weight: bold;font-size: 40px">
        總金額：
      </div>
    </div>
    <div class="col-md-6 text-align-center" style=" color: orange; font-weight: bold; font-size: 120px ">
      {{totalAmount}}
    </div>
  </div>




  <div class="mt-3">
    {{#each records}}
    <div class="d-flex justify-content-between">
      <div class="container">
        <ul class="list-group">
          <li class="list-group-item">
            <div class=" d-flex align-items-center">
              <div class="col-2 " style="padding:0">
                <i class="{{ this.icon }}" style="font-size:40px;color:lightblue"></i>
              </div>
              <div class="align-items-center">
                <h4 style="align-items: center;  font-weight:bold">
                  {{ this.name }}
                </h4>
                <p>
                  {{ this.date }}
                </p>
              </div>
              <div class="ml-5">
                <h4 style="font-weight:bold">
                  {{ this.merchant }}
                </h4>
              </div>
              <div class="ml-5" style="flex: 1;text-align: right">
                <div style="font-size:30px; font-weight:bold">{{ this.amount }}</div>
              </div>
            </div>
          </li>
        </ul>
      </div>

      <div class="d-flex align-items-center">
        <form action="./records/{{ this._id }}/edit">
          <button class="btn btn-success">
            edit
          </button>
        </form>

        <form action="./records/{{ this._id }}?_method=DELETE" method="POST" style="display: inline;">
          <button class="btn btn-danger" type="submit">delete</button>
        </form>
      </div>
    </div>

    {{/each}}
  </div>


  <div class="mt-5" style="text-align:center;">
    <form action="./records/new">
      <button class="btn btn-danger btn-lg" type="submit">新增支出</button>
    </form>
  </div>

  {{!-- 控制List顏色 --}}
  <script>
    const list = document.querySelectorAll('li')
    for (let i = 0; i < list.length; i++) {
      if (i % 2 === 1) {
        list[i].style.background = "#E0E0E0"
      }
    }
  </script>